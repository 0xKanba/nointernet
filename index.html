<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Calculator 3D</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="/icons/calc16.png" type="image/png">
    <link rel="shortcut icon" href="/icons/calc512.png" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/calc32.png">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <!-- 3D Background -->
    <div class="bg-3d">
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
            <div class="shape shape-5"></div>
        </div>
        <div class="grid-overlay"></div>
    </div>

    <!-- Language Toggle -->
    <div class="controls-top">
        <button id="lang-btn" class="control-btn">Ø¹Ø±Ø¨ÙŠ</button>
        <button id="mode-toggle" class="control-btn">Scientific</button>
        <button id="theme-toggle" class="control-btn">ðŸŒ™</button>
    </div>

    <!-- Calculator Container -->
    <div class="calculator-container">
        <!-- History Panel -->
        <div class="history-panel" id="history-panel">
            <div class="history-header">
                <h4 id="history-title">History</h4>
                <button class="collapse-btn" id="collapse-btn">â–¼</button>
            </div>
            <div class="history-content">
                <ul id="history-list"></ul>
                <button id="clear-history" class="clear-btn">Clear All</button>
            </div>
        </div>

        <!-- Main Calculator -->
        <div class="calculator" id="calculator">
            <!-- Display -->
            <div class="display-container">
                <div class="expression" id="expression"></div>
                <input type="text" id="result" readonly placeholder="0">
            </div>

            <!-- Scientific Mode Toggle Buttons -->
            <div class="mode-buttons" id="scientific-buttons">
                <button class="btn sci-btn" onclick="appendFunction('sin(')">sin</button>
                <button class="btn sci-btn" onclick="appendFunction('cos(')">cos</button>
                <button class="btn sci-btn" onclick="appendFunction('tan(')">tan</button>
                <button class="btn sci-btn" onclick="appendFunction('log(')">log</button>
                <button class="btn sci-btn" onclick="appendFunction('ln(')">ln</button>
                <button class="btn sci-btn" onclick="appendValue('Ï€')">Ï€</button>
                <button class="btn sci-btn" onclick="appendValue('e')">e</button>
                <button class="btn sci-btn" onclick="appendFunction('âˆš(')">âˆš</button>
                <button class="btn sci-btn" onclick="appendValue('^')">x^y</button>
                <button class="btn sci-btn" onclick="appendValue('!')"  >n!</button>
            </div>

            <!-- Main Buttons Grid -->
            <div class="buttons-grid">
                <!-- Row 1 -->
                <button class="btn clear-btn" onclick="clearAll()">AC</button>
                <button class="btn function-btn" onclick="clearEntry()">CE</button>
                <button class="btn function-btn" onclick="percentage()">%</button>
                <button class="btn operator-btn" onclick="appendOperator('/')">Ã·</button>

                <!-- Row 2 -->
                <button class="btn number-btn" onclick="appendValue('7')">7</button>
                <button class="btn number-btn" onclick="appendValue('8')">8</button>
                <button class="btn number-btn" onclick="appendValue('9')">9</button>
                <button class="btn operator-btn" onclick="appendOperator('*')">Ã—</button>

                <!-- Row 3 -->
                <button class="btn number-btn" onclick="appendValue('4')">4</button>
                <button class="btn number-btn" onclick="appendValue('5')">5</button>
                <button class="btn number-btn" onclick="appendValue('6')">6</button>
                <button class="btn operator-btn" onclick="appendOperator('-')">âˆ’</button>

                <!-- Row 4 -->
                <button class="btn number-btn" onclick="appendValue('1')">1</button>
                <button class="btn number-btn" onclick="appendValue('2')">2</button>
                <button class="btn number-btn" onclick="appendValue('3')">3</button>
                <button class="btn operator-btn" onclick="appendOperator('+')">+</button>

                <!-- Row 5 -->
                <button class="btn number-btn zero-btn" onclick="appendValue('0')">0</button>
                <button class="btn function-btn" onclick="appendValue('.')">.</button>
                <button class="btn function-btn" onclick="deleteChar()">âŒ«</button>
                <button class="btn equals-btn" onclick="calculate()">=</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('SW Registered:', reg))
                    .catch(err => console.error('SW Registration Failed:', err));
            });
        }
    </script>
</body>
</html>
